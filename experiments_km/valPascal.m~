% Open up a Pascal (train) file and validate my understanding of the
% wireframe model, keypoint conventions, etc.


% Declaring global variables
globals;

% PASCAL_DIR contains the path to the directory containing Pascal images
% Load an image from the directory
curIdx = 1;

% Get the number of training samples
numTrain = length(train_model.rotP3d);

% Read in image
im = imread(fullfile(PASCAL_DIR, [train.voc_image_id{curIdx}, '.jpg']));
% Read in bbox corresponding to the current detection
bbox = train.bbox(curIdx,:);

% Get 2D locations of keypoints
kps2d = train_model.points2([curIdx,numTrain+curIdx],:);

% Retain only non-NaN keypoints
kps2d(:,find(sum(isnan(kps2d),1) ~= 2))

% Display the image and the bbox
imshow(im);
hold on;
rectangle('Position', [bbox(1), bbox(2), bbox(3), bbox(4)], ...
    'EdgeColor', 'g', 'LineWidth', 3);
hold off;


% Clearing variables that are of no significant use
clear curIdx
clear im
clear bbox
% clear kps2d
